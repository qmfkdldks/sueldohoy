{"version":3,"file":"static/webpack/static/development/pages/index.js.654bef00d781affe9dce.hot-update.js","sources":["webpack:///./components/SalaryForm/index.js"],"sourcesContent":["import React from 'react'\nimport { Box, Button, Form, FormField, Heading, Paragraph, WorldMap } from 'grommet'\nimport { Gremlin, Currency, Home } from 'grommet-icons'\nimport fetch from 'isomorphic-unfetch'\nimport SalaryResult from '../SalaryResult'\nimport DateMaskedInput from '../DateMaskedInput'\nimport PriceJson from './tprice.json'\n\nfunction getD(index, data, date, value, icon = <Currency />) {\n    const past_obj = data.find((record) => (record.d == date))\n\n    if (past_obj) {\n        const past_ratio = past_obj.v\n        const past_available = parseFloat(value) / past_ratio\n\n        const current_ratio = data[data.length - 1].v\n        const current_necessary = (past_available * current_ratio)\n        const object = { index: index, icon: icon, could: past_available.toFixed(2), need: current_necessary.toFixed(2) }\n        console.log(object)\n        return object\n    }\n    return {}\n}\n\nfunction calculatePrice(index, usd, date, value, icon = <Gremlin />) {\n    const past_obj = usd.find((record) => (record.d == date))\n    const past_product_price = PriceJson[new Date(date).getFullYear()]\n    const current_product_price = PriceJson[new Date().getFullYear()]\n\n    if (past_obj && past_product_price && current_product_price) {\n        const past_dollar_price = past_obj.v\n        const past_available_dollar = parseFloat(value) / past_dollar_price\n        const past_available_product = past_available_dollar / past_product_price[index]\n\n        \n        const current_necesary_dollar = past_available_product * current_product_price[index]\n\n        const current_ratio = usd[usd.length - 1].v\n        const current_necesary_pesos = current_necesary_dollar * current_ratio\n        // const current_available_product = past_available_dollar / current_product_price\n\n        const object = { index: index, could: past_available_product.toFixed(2), need: current_necesary_pesos.toFixed(2) }\n        console.log(object)\n        return object\n    }\n    return {}\n}\n\nclass SalaryForm extends React.Component {\n    state = {\n        data: [],\n        date: \"\",\n        value: \"\",\n        usd: [],\n        cer: [],\n        uva: [],\n        uvi: [],\n        idle: true,\n        fetching: true\n    }\n\n    componentDidMount() {\n        this.fetchData()\n    }\n\n    fetchData = async () => {\n        this.setState({ fetching: true })\n        const response1 = await fetch('/usd')\n        const usd = await response1.json()\n        const response2 = await fetch('/cer')\n        const cer = await response2.json()\n        const response3 = await fetch('/uva')\n        const uva = await response3.json()\n        const response4 = await fetch('/uvi')\n        const uvi = await response4.json()\n        this.setState({ usd, cer, uva, uvi, fetching: false })\n    }\n\n    onCalculate = () => {\n        const { value, date, usd, cer, uva, uvi } = this.state\n        console.log(value, date)\n        if ((new Date(date)) < (new Date())) {\n\n            this.setState({ idle: false })\n\n            const data = []\n            console.log(usd)\n            data.push(getD(\"USD\", usd, date, value, <Currency />))\n            data.push(getD(\"UVI\", uvi, date, value, <Home />))\n            data.push(getD(\"CER\", cer, date, value))\n            data.push(getD(\"UVA\", uva, date, value))\n            data.push(calculatePrice(\"Manzana (1kg)\", usd, date, value))\n            data.push(calculatePrice(\"McMeal\", usd, date, value))\n            data.push(calculatePrice(\"Gasolina (1 litro)\", usd, date, value))\n            // data.push(calculatePrice(\"One Way Ticket (Local transport)\", usd, date, value))\n\n            this.setState({ data: data })\n        }\n\n    }\n\n    onChangeDate = event => this.setState({ date: event.target.value })\n\n    onValueChange = event => this.setState({ value: event.target.value })\n\n    render() {\n        const { value, idle, fetching, data } = this.state\n\n        const renderResult = (idle) ? (\n            <Box pad=\"medium\">\n                <Heading>\n                    La inflación Argentina en 2018 fue del 47,6%, la cifra más alta en los últimos 27 años.\n                </Heading>\n                <WorldMap />\n            </Box>\n        ) : <SalaryResult data={data} />\n\n        return (\n            <React.Fragment>\n                <Box direction=\"row-responsive\" pad='large'>\n\n                    <Box pad=\"medium\" gap=\"small\" >\n                        <Form onSubmit={this.onCalculate}>\n                            <Heading>¿Cuánto cobraba cuando tuvo su ultimo aumento?</Heading>\n                            <Paragraph>La inflación hace dificil saber cual es el porcentaje justo de actualizacion salarial que debe perseguir el empleado.</Paragraph>\n                            <Box gap=\"small\" pad=\"medium\">\n                                <Box direction=\"row\" gap=\"small\" align=\"center\">\n                                    <Currency />\n                                    <label>\n                                        <FormField\n                                            label=\"¿Cuánto cobraste?\"\n                                            min={1}\n                                            required={true}\n                                            type=\"number\"\n                                            placeholder=\"$ Sueldo anterior\"\n                                            value={value}\n                                            onChange={this.onValueChange}\n                                        />\n                                    </label>\n                                </Box>\n                                <label>\n                                    <FormField label=\"¿Cúando cobraste?\">\n                                        <DateMaskedInput value={this.state.date} onChange={this.onChangeDate} />\n                                    </FormField>\n                                </label>\n                                {/* s<Calendar size=\"medium\" alignSelf=\"center\" date={this.state.date} /> */}\n                            </Box>\n                            <Box align=\"end\">\n                                <Button type=\"submit\" disabled={fetching} icon={<Gremlin />} label=\"Calcular\" />\n                            </Box>\n                        </Form>\n                    </Box>\n\n                    <Box width=\"100%\" round={true} background='brand' align=\"center\" justify=\"center\">\n                        {renderResult}\n                    </Box>\n\n                </Box>\n            </React.Fragment >\n        )\n    }\n}\n\nexport default SalaryForm"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAEA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AACA;;;;;AAeA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAFA;AAAA;AACA;AADA;AAEA;AAFA;AAAA;AACA;AADA;AAGA;AAHA;AAAA;AACA;AADA;AAIA;AAJA;AAAA;AACA;AADA;AAKA;AALA;AAAA;AACA;AADA;AAMA;AANA;AAAA;AACA;AADA;AAOA;AAPA;AAAA;AACA;AADA;AAQA;AARA;AAAA;AACA;AADA;AASA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAXA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAYA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAEA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;AA3CA;AACA;AACA;;;AA0CA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AAMA;AAAA;AAEA;AAEA;AAAA;AAAA;AAEA;AAAA;AAAA;AACA;AAAA;AAGA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAYA;AAAA;AACA;AAAA;AAAA;AAKA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;;;;AAhHA;AACA;AAkHA;;;;A","sourceRoot":""}